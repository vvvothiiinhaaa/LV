function updateTime() {
    if (typeof window.timer === 'undefined') {
        console.error("Biến timer chưa được định nghĩa.");
        return; // Ngừng thực thi nếu timer chưa được định nghĩa
    }

    let e = new Date().getTime(),
        t = window.timer, // Sử dụng biến toàn cục timer
        a = 0;

    for (let n = 0; n < ID.length; n++) {
        clearInterval(ID[n]);
    }

    var i = setInterval(function () {
        a++;
        if (t !== null) {
            let minutes = parseInt(t / 60, 10);
            let seconds = parseInt(t % 60, 10);
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            $("#minute").text(minutes);
            $("#second").text(seconds);

            let n = parseInt((new Date().getTime() - e) / 1e3, 10);
            t -= n;
        }
    }, 1000);

    ID.push(i);
}

$(document).ready(function () {
    updateTime(); // Gọi hàm khi DOM đã sẵn sàng
});
